<Window
    x:Class="MCCBounceEnable.Linux.Views.MainWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="MCC Bounce Enable (Linux)"
    Width="640"
    Height="410"
    CanResize="False"
    Background="#FF2D2B2B"
    Icon="/Assets/icon.png"
    WindowStartupLocation="CenterScreen">

    <StackPanel Margin="16" Spacing="12">
        <Border
            Background="#FF3A3838"
            BorderBrush="#FF1E699B"
            BorderThickness="1"
            CornerRadius="6"
            Padding="10"
            Margin="0,0,0,8">
            <DockPanel LastChildFill="True">
                <Border
                    Name="AttachStatusIndicator"
                    Width="10"
                    Height="10"
                    CornerRadius="5"
                    Background="#FFC62828"
                    Margin="0,0,8,0"
                    DockPanel.Dock="Left" />
                <TextBlock
                    Name="AttachStatusText"
                    Foreground="White"
                    Text="Not attached. Start MCC and load Halo 2." />
            </DockPanel>
        </Border>

        <StackPanel Spacing="6">
            <TextBlock Foreground="White" Text="Halo 2 Classic Tickrate (MCC via Proton)" />
            <TextBlock Foreground="#FFBFBFBF"
                       Text="Requires MCC-Win64-Shipping.exe running with halo2.dll loaded. Run as root/sudo for ptrace access. Press Attach before using tickrate controls."
                       TextWrapping="Wrap" />
            <TextBlock Foreground="#FFBFBFBF"
                       Text="Tip: scanning pauses the game while memory is read."
                       TextWrapping="Wrap" />
        </StackPanel>

        <StackPanel Orientation="Horizontal" Spacing="12">
            <Button Name="AttachButton" Content="Attach" Click="AttachButton_OnClick">
                <Button.Styles>
                    <Style Selector="Button">
                        <Setter Property="Background" Value="#FF464646" />
                        <Setter Property="BorderBrush" Value="#FF1E699B" />
                        <Setter Property="BorderThickness" Value="2" />
                        <Setter Property="TextElement.Foreground" Value="White" />
                    </Style>
                    <Style Selector="Button:pointerover">
                        <Setter Property="Background" Value="Gray" />
                    </Style>
                    <Style Selector="Button:pressed">
                        <Setter Property="Background" Value="#FFCECECE" />
                    </Style>
                    <Style Selector="Button:disabled">
                        <Setter Property="Background" Value="#FF858585" />
                        <Setter Property="BorderBrush" Value="#FF858585" />
                        <Setter Property="TextElement.Foreground" Value="#FFA5A5A5" />
                    </Style>
                </Button.Styles>
            </Button>
            <CheckBox Name="TickrateCheckBox"
                      Content="Use 30 Hz tickrate (OG Xbox)"
                      Foreground="White"
                      ToolTip.Tip="Attach to MCC first."
                      Checked="TickrateCheckBox_OnChanged"
                      Unchecked="TickrateCheckBox_OnChanged" />
            <CheckBox Name="Pal50CheckBox"
                      Content="PAL 50 (disabled)"
                      Foreground="White"
                      IsEnabled="False"
                      ToolTip.Tip="Needs the correct byte pattern before it can be enabled." />
            <CheckBox Name="Pal25CheckBox"
                      Content="PAL 25 (unstable)"
                      Foreground="White"
                      ToolTip.Tip="Attach to MCC first."
                      Checked="Pal25CheckBox_OnChanged"
                      Unchecked="Pal25CheckBox_OnChanged" />
            <Button Name="VerifyButton" Content="Verify Tickrate" Click="VerifyButton_OnClick" ToolTip.Tip="Attach to MCC first.">
                <Button.Styles>
                    <Style Selector="Button">
                        <Setter Property="Background" Value="#FF464646" />
                        <Setter Property="BorderBrush" Value="#FF1E699B" />
                        <Setter Property="BorderThickness" Value="2" />
                        <Setter Property="TextElement.Foreground" Value="White" />
                    </Style>
                    <Style Selector="Button:pointerover">
                        <Setter Property="Background" Value="Gray" />
                    </Style>
                    <Style Selector="Button:pressed">
                        <Setter Property="Background" Value="#FFCECECE" />
                    </Style>
                    <Style Selector="Button:disabled">
                        <Setter Property="Background" Value="#FF858585" />
                        <Setter Property="BorderBrush" Value="#FF858585" />
                        <Setter Property="TextElement.Foreground" Value="#FFA5A5A5" />
                    </Style>
                </Button.Styles>
            </Button>
            <Button Name="RescanButton" Content="Rescan Address" Click="RescanButton_OnClick" ToolTip.Tip="Attach to MCC first.">
                <Button.Styles>
                    <Style Selector="Button">
                        <Setter Property="Background" Value="#FF464646" />
                        <Setter Property="BorderBrush" Value="#FF1E699B" />
                        <Setter Property="BorderThickness" Value="2" />
                        <Setter Property="TextElement.Foreground" Value="White" />
                    </Style>
                    <Style Selector="Button:pointerover">
                        <Setter Property="Background" Value="Gray" />
                    </Style>
                    <Style Selector="Button:pressed">
                        <Setter Property="Background" Value="#FFCECECE" />
                    </Style>
                    <Style Selector="Button:disabled">
                        <Setter Property="Background" Value="#FF858585" />
                        <Setter Property="BorderBrush" Value="#FF858585" />
                        <Setter Property="TextElement.Foreground" Value="#FFA5A5A5" />
                    </Style>
                </Button.Styles>
            </Button>
        </StackPanel>

        <TextBlock Name="TickrateStatusText" Foreground="#FFBFBFBF" Text="Tickrate: unknown." />
        <TextBlock Name="AddressStatusText" Foreground="#FFBFBFBF" Text="Pattern address: not found." />

        <Border
            Background="#FF3A3838"
            BorderBrush="#FF1E699B"
            BorderThickness="1"
            CornerRadius="6"
            Padding="10">
            <StackPanel Spacing="6">
                <TextBlock Foreground="White" Text="Test Bytes (Advanced)" />
                <TextBlock Foreground="#FFBFBFBF"
                           Text="Enter 6 hex bytes (e.g., 1E 00 89 88 08 3D). Use with care."
                           TextWrapping="Wrap" />
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <TextBox Name="TestBytesTextBox" Width="280" Watermark="1E 00 89 88 08 3D" />
                    <Button Name="ReadBytesButton" Content="Read" Click="ReadBytesButton_OnClick" ToolTip.Tip="Attach to MCC first.">
                        <Button.Styles>
                            <Style Selector="Button">
                                <Setter Property="Background" Value="#FF464646" />
                                <Setter Property="BorderBrush" Value="#FF1E699B" />
                                <Setter Property="BorderThickness" Value="2" />
                                <Setter Property="TextElement.Foreground" Value="White" />
                            </Style>
                            <Style Selector="Button:pointerover">
                                <Setter Property="Background" Value="Gray" />
                            </Style>
                            <Style Selector="Button:pressed">
                                <Setter Property="Background" Value="#FFCECECE" />
                            </Style>
                            <Style Selector="Button:disabled">
                                <Setter Property="Background" Value="#FF858585" />
                                <Setter Property="BorderBrush" Value="#FF858585" />
                                <Setter Property="TextElement.Foreground" Value="#FFA5A5A5" />
                            </Style>
                        </Button.Styles>
                    </Button>
                    <Button Name="ApplyBytesButton" Content="Apply" Click="ApplyBytesButton_OnClick" ToolTip.Tip="Attach to MCC first.">
                        <Button.Styles>
                            <Style Selector="Button">
                                <Setter Property="Background" Value="#FF464646" />
                                <Setter Property="BorderBrush" Value="#FF1E699B" />
                                <Setter Property="BorderThickness" Value="2" />
                                <Setter Property="TextElement.Foreground" Value="White" />
                            </Style>
                            <Style Selector="Button:pointerover">
                                <Setter Property="Background" Value="Gray" />
                            </Style>
                            <Style Selector="Button:pressed">
                                <Setter Property="Background" Value="#FFCECECE" />
                            </Style>
                            <Style Selector="Button:disabled">
                                <Setter Property="Background" Value="#FF858585" />
                                <Setter Property="BorderBrush" Value="#FF858585" />
                                <Setter Property="TextElement.Foreground" Value="#FFA5A5A5" />
                            </Style>
                        </Button.Styles>
                    </Button>
                </StackPanel>
                <TextBlock Name="TestBytesStatusText" Foreground="#FFBFBFBF" Text="Test bytes: idle." />
            </StackPanel>
        </Border>
    </StackPanel>
</Window>
